{"version":3,"file":"wpstg-admin-pro.min.js","sources":["../../src/modules/wpstg-dom-utils.js","../../src/modules/wpstg-polyfill.js","../../src/pro/modules/wpstg-clone-edit.js","../../src/pro/modules/wpstg-push-table-selection.js","../../src/pro/modules/wpstg-push-file-selection.js","../../src/modules/wpstg-hover-intent.js","../../src/pro/wpstg-admin-pro.js","../../src/wpstg.js","../../src/modules/wpstg-loader.js","../../src/pro/modules/wpstg-remote-storage.js"],"sourcesContent":["import {closest} from './wpstg-polyfill';\n\n/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  if (!parent instanceof Element) {\n    return;\n  }\n\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function fadeOut(element, duration = 300) {\n  element.style.opacity = 1;\n  element.style.transitionProperty = 'opacity';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.opacity = 0;\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('opacity');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n\n/**\n * Dispatches a change on an element that will trigger, depending on the element type,\n * cascading changes on elements dependant on the one that triggered the change and that\n * belong in the same container.\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleDisplayDependencies(element) {\n  if (!element instanceof Element || !element.id) {\n    return;\n  }\n\n  const containerSelector = '.wpstg-container';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n  const elementType = element.getAttribute('type');\n\n  switch (elementType) {\n    case 'checkbox':\n      // Go as high as the container that contains this element.\n      const container = closest(element, containerSelector);\n\n      if (container === null) {\n        return;\n      }\n\n      const showIfChecked = container.querySelectorAll(`[data-show-if-checked=\"${element.id}\"]`);\n      const showIfUnchecked = container.querySelectorAll(`[data-show-if-unchecked=\"${element.id}\"]`);\n      const checked = element.checked;\n\n      if (showIfChecked.length) {\n        for (const el of showIfChecked) {\n          if (checked) {\n            el.classList.remove(hiddenClass);\n          } else {\n            el.classList.add(hiddenClass);\n          }\n        }\n      }\n\n      if (showIfUnchecked.length) {\n        for (const el of showIfUnchecked) {\n          if (checked) {\n            el.classList.add(hiddenClass);\n          } else {\n            el.classList.remove(hiddenClass);\n          }\n        }\n      }\n\n      return;\n    default:\n      // Not a type we handle.\n      return;\n  }\n}\n\n/**\n * Initializes the display status of any element that depends on the status of another to\n * either hide or show.\n *\n * @return {void} The function will have the side-effect to toggle the hide/show class from\n *                elements dependant on another to hide or show.\n */\nexport function initDependantDisplay() {\n  const displayControllerSelector = '[onchange^=\"WPStaging.handleDisplayDependencies\"]';\n  const displayControllers = document.querySelectorAll(displayControllerSelector);\n  for (const displayController of displayControllers) {\n    handleDisplayDependencies(displayController);\n  }\n}\n\n/**\n * Toggle target element set in data-wpstg-target of the given element\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleToggleElement(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.classList.toggle(hiddenClass);\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-copy to element(s) in data-wpstg-target\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyPaste(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target') || !element.getAttribute('data-wpstg-copy')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  navigator.clipboard.writeText(element.getAttribute('data-wpstg-copy'));\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.value = element.getAttribute('data-wpstg-copy', '');\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-source to clipboard\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyToClipboard(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-source')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const el = container.querySelector(element.getAttribute('data-wpstg-source'));\n\n  if (el) {\n    navigator.clipboard.writeText(el.value);\n  }\n}\n\n","/**\n * Polyfills the `Element.prototype.closest` function if not available in the browser.\n *\n * @return {Function} A function that will return the closest element, by selector, to this element.\n */\nfunction polyfillClosest() {\n  if (Element.prototype.closest) {\n    if (!Element.prototype.matches) {\n      Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    Element.prototype.closest = function(s) {\n      let el = this;\n\n      do {\n        if (Element.prototype.matches.call(el, s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n      return null;\n    };\n  }\n\n  return function(element, selector) {\n    return element instanceof Element ? element.closest(selector) : null;\n  };\n}\n\nexport const closest = polyfillClosest();\n","\nimport * as dom from './../../modules/wpstg-dom-utils.js';\n\n// Delay time in millisecond after which the request is send to check db connection\n// This is to make sure we have not many ajax request even when they were not required i.e. while typing.\nexport const DELAY_TIME_DB_CHECK = 300;\nexport default class WpstgCloneEdit {\n  constructor(\n      workflowSelector = '#wpstg-workflow',\n      dbCheckTriggerClass = '.wpstg-edit-clone-db-inputs',\n      wpstgObject = wpstg,\n      databaseCheckAction = 'wpstg_database_connect',\n  ) {\n    this.workflow = dom.qs(workflowSelector);\n    this.dbCheckTriggerClass = dbCheckTriggerClass;\n    this.wpstgObject = wpstgObject;\n    this.databaseCheckAction = databaseCheckAction;\n    this.dbCheckTimer = null;\n    this.abortDbCheckController = null;\n    this.dbCheckCallStatus = false;\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    // early bail if workflow object not available.\n    if (this.workflow === null) {\n      return;\n    }\n\n    ['paste', 'input'].forEach( (evt) => {\n      dom.addEvent(this.workflow, evt, this.dbCheckTriggerClass, () => {\n        // abort previous database check call if it was running\n        if (this.dbCheckCallStatus === true) {\n          this.abortDbCheckController.abort();\n          this.abortDbCheckController = null;\n          this.dbCheckCallStatus = false;\n        }\n\n        // check for db connection after specific delay but reset the timer if these event occur again\n        clearTimeout(this.dbCheckTimer);\n        this.dbCheckTimer = setTimeout(() => {\n          this.checkDatabase();\n        }, DELAY_TIME_DB_CHECK);\n      });\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  checkDatabase() {\n    const idPrefix = '#wpstg-edit-clone-data-';\n    const externalDBUser = dom.qs(idPrefix + 'database-user').value;\n    const externalDBPassword = dom.qs(idPrefix + 'database-password').value;\n    const externalDBDatabase = dom.qs(idPrefix + 'database-database').value;\n    const externalDBHost = dom.qs(idPrefix + 'database-server').value;\n    const externalDBPrefix = dom.qs(idPrefix + 'database-prefix').value;\n\n    if (externalDBUser === '' && externalDBPassword === '' && externalDBDatabase === '' && externalDBPrefix === '') {\n      dom.qs('#wpstg-save-clone-data').disabled = false;\n      return;\n    }\n\n    this.abortDbCheckController = new AbortController();\n    this.dbCheckCallStatus = true;\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      signal: this.abortDbCheckController.signal,\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.databaseCheckAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        databaseUser: externalDBUser,\n        databasePassword: externalDBPassword,\n        databaseServer: externalDBHost,\n        databaseDatabase: externalDBDatabase,\n        databasePrefix: externalDBPrefix,\n        databaseEnsurePrefixTableExist: true,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      this.dbCheckCallStatus = false;\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // dismiss previous toasts\n      this.notyf.dismissAll();\n      // failed request\n      if (false === data) {\n        this.notyf.error(this.wpstgObject.i18n['dbConnectionFailed']);\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // failed db connection\n      if ('undefined' !== typeof (data.errors) && data.errors && 'undefined' !== typeof (data.success) && data.success === 'false') {\n        this.notyf.error(this.wpstgObject.i18n['dbConnectionFailed'] +'! <br/> Error: '+ data.errors);\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // prefix warning\n      if ('undefined' !== typeof (data.errors) && data.errors && 'undefined' !== typeof (data.success) && data.success === 'true') {\n        this.notyf.open({\n          type: 'warning',\n          message: 'Warning: ' + data.errors,\n        });\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // db connection successful\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.notyf.success(this.wpstgObject.i18n['dbConnectionSuccess']);\n        dom.qs('#wpstg-save-clone-data').disabled = false;\n      }\n    }).catch((error) => {\n      this.dbCheckCallStatus = false;\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n      dom.qs('#wpstg-save-clone-data').disabled = true;\n    });\n  }\n}\n","\nimport * as dom from './../../modules/wpstg-dom-utils';\n\n/**\n * Push Table Selection\n */\nexport default class WpstgPushTableSelection {\n  constructor(\n      workflowSelector = '#wpstg-workflow',\n      inputSelector = '#wpstg_select_tables_pushing',\n      wpstgObject = wpstg,\n  ) {\n    this.workflow = dom.qs(workflowSelector);\n    this.inputSelector = inputSelector;\n    this.input = dom.qs(inputSelector);\n    this.wpstgObject = wpstgObject;\n    this.cloneID = this.input.getAttribute('data-clone');\n    this.tablePrefix = this.input.getAttribute('data-prefix');\n    this.isNetwork = this.input.getAttribute('data-network') === 'true';\n    this.areAllTablesChecked = true;\n\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(document.body, 'click', '.wpstg-button-show-tables', (target) => {\n      this.showAllTables();\n    });\n\n    dom.addEvent(document.body, 'click', '.wpstg-button-db-prefix', () => {\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(document.body, 'click', '.wpstg-button-unselect', () => {\n      this.toggleTableSelection();\n    });\n\n    dom.addEvent(document.body, 'change', this.inputSelector, () => {\n      this.countSelectedTables();\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  showAllTables() {\n    let includedTables = this.getIncludedTables();\n    let excludedTables = this.getExcludedTables();\n\n    if (includedTables.length > excludedTables.length) {\n      includedTables = '';\n    } else if (excludedTables.length > includedTables.length) {\n      excludedTables = '';\n    }\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg_push_tables',\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        clone: this.cloneID,\n        includedTables: includedTables,\n        excludedTables: excludedTables,\n        selectedTablesWithoutPrefix: this.getSelectedTablesWithoutPrefix(),\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // Reload current page if successful.\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.input.innerHTML = data.content;\n        dom.fadeOut(dom.qs('.wpstg-button-show-tables'), 300);\n\n        this.countSelectedTables();\n        return;\n      }\n\n      // There will be message probably in case of error\n      if ('undefined' !== typeof (data.message)) {\n        this.notyf.error(data.message);\n        return;\n      }\n\n      this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n\n  getRegexPattern() {\n    let pattern = '^' + this.tablePrefix;\n    if (this.wpstgObject.isMultisite === '1' && !this.isNetwork) {\n      pattern += '([^0-9])_*';\n    }\n\n    return pattern;\n  }\n\n  selectDefaultTables() {\n    const options = this.input.querySelectorAll('.wpstg-db-table');\n    const pattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(pattern)) {\n        option.selected = true;\n      } else {\n        option.selected = false;\n      }\n    });\n\n    this.countSelectedTables();\n  }\n\n  toggleTableSelection() {\n    if (false === this.areAllTablesChecked) {\n      this.input.querySelectorAll('.wpstg-db-table').forEach((option) => {\n        option.selected = true;\n      });\n\n      this.workflow.querySelector('.wpstg-button-unselect').innerHTML = 'Unselect All';\n      this.areAllTablesChecked = true;\n    } else {\n      this.input.querySelectorAll('.wpstg-db-table').forEach((option) => {\n        option.selected = false;\n      });\n      this.workflow.querySelector('.wpstg-button-unselect').innerHTML = 'Select All';\n      this.areAllTablesChecked = false;\n    }\n\n    this.countSelectedTables();\n  }\n\n  getSelectedTablesWithoutPrefix() {\n    const selectedTablesWithoutPrefix = [];\n    const regexPattern = this.getRegexPattern();\n    this.input.querySelectorAll('option:checked').forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (!name.match(regexPattern)) {\n        selectedTablesWithoutPrefix.push(name);\n      }\n    });\n\n    return selectedTablesWithoutPrefix.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  getIncludedTables() {\n    const tables = [];\n    const regexPattern = this.getRegexPattern();\n    this.input.querySelectorAll('option:checked').forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        tables.push(name);\n      }\n    });\n\n    return tables.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  getExcludedTables() {\n    const tables = [];\n    const regexPattern = this.getRegexPattern();\n    this.input.querySelectorAll('option:not(:checked)').forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        tables.push(name);\n      }\n    });\n\n    return tables.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  countSelectedTables() {\n    const tablesCount = this.input.querySelectorAll('option:checked').length;\n    const tablesCountElement = dom.qs('#wpstg-tables-count');\n    if (tablesCount === 0) {\n      tablesCountElement.classList.add('danger');\n      tablesCountElement.innerHTML = this.wpstgObject.i18n['noTableSelected'];\n    } else {\n      tablesCountElement.classList.remove('danger');\n      tablesCountElement.innerHTML = this.wpstgObject.i18n['tablesSelected'].replace('{d}', tablesCount);\n    }\n  }\n}\n","\nimport * as dom from './../../modules/wpstg-dom-utils';\n\n/**\n * Push File Selection\n */\nexport default class WpstgPushFileSelection {\n  constructor(\n      workflowSelector = '#wpstg-workflow',\n      filesTabSelector = '#wpstg-scanning-files',\n      dirSelector = '.wpstg-check-dir',\n      wpstgObject = wpstg,\n  ) {\n    this.workflow = dom.qs(workflowSelector);\n    this.filesTabSelector = filesTabSelector;\n    this.filesTab = dom.qs(filesTabSelector);\n    this.dirSelector = dirSelector;\n    this.wpstgObject = wpstgObject;\n\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(this.workflow, 'change', this.filesTabSelector + ' ' + this.dirSelector, (el) => {\n      this.toggleChildren(el);\n      this.countSelectedFiles();\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  toggleChildren(el) {\n    const parent = dom.getParents(el, '.wpstg-dir')[0];\n    const checkboxes = parent.querySelectorAll('.wpstg-subdir>.wpstg-dir>' + this.dirSelector);\n    checkboxes.forEach((cb) => {\n      cb.checked = el.checked;\n    });\n  }\n\n  countSelectedFiles() {\n    const filesCount = this.filesTab.querySelectorAll(this.dirSelector + ':checked').length;\n    const filesCountElement = dom.qs('#wpstg-files-count');\n    if (filesCount === 0) {\n      filesCountElement.classList.add('danger');\n      filesCountElement.innerHTML = this.wpstgObject.i18n['noFileSelected'];\n    } else {\n      let themesCount = 0;\n      let pluginsCount = 0;\n      filesCountElement.classList.remove('danger');\n      this.filesTab.querySelectorAll('.wpstg-dir:not(.wpstg-sub-dir)>.wpstg-expand-dirs').forEach((head) => {\n        if (head.innerHTML === 'plugins') {\n          pluginsCount = head.nextSibling.querySelectorAll(this.dirSelector + ':checked').length;\n        }\n\n        if (head.innerHTML === 'themes') {\n          themesCount = head.nextSibling.querySelectorAll(this.dirSelector + ':checked').length;\n        }\n      });\n\n      filesCountElement.innerHTML = this.wpstgObject.i18n['filesSelected'].replace('{t}', themesCount).replace('{p}', pluginsCount);\n    }\n  }\n}\n","'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","import WpstgCloneEdit from './modules/wpstg-clone-edit.js';\nimport WpstgPushTableSelection from './modules/wpstg-push-table-selection.js';\nimport WpstgPushFileSelection from './modules/wpstg-push-file-selection.js';\nimport WpstgRemoteStorage from './modules/wpstg-remote-storage.js';\nimport WPStagingCommon from '../wpstg.js';\n\nconst WPStagingPro = function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n    tableSelector: null,\n    fileSelector: null,\n  };\n\n  // Cache Elements\n  const cache = {elements: []};\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n\n  /**\n     * Ajax Scanning before starting push process\n     */\n  const startScanning = function() {\n    // Scan db and file system\n    const $workFlow = cache.get('#wpstg-workflow');\n\n\n    $workFlow\n    // Load scanning data\n        .on('click', '.wpstg-push-changes', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          // Disable button\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          // Add loading overlay\n          $workFlow.addClass('loading');\n\n          // Get clone id\n          // var cloneID = $this.data(\"clone\");\n          // Get clone id\n          const cloneID = $(this).data('clone');\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_scan',\n            clone: cloneID,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          // Send ajax request\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                                'and try again. If that does not help, ' +\n                                '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n                  );\n                }\n\n                // Styling of elements\n                $workFlow.removeClass('loading').html(response);\n\n                WPStaging.switchStep(2);\n\n                cache.get('.wpstg-step3-cloning').hide();\n                cache.get('.wpstg-step3-pushing').show();\n\n                cache.get('.wpstg-loader').hide();\n                that.tableSelector = new WpstgPushTableSelection();\n                that.fileSelector = new WpstgPushFileSelection();\n                that.tableSelector.countSelectedTables();\n                that.fileSelector.countSelectedFiles();\n                // cache.get(\".wpstg-loader\").hide();\n              },\n              'HTML',\n          );\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          WPStaging.loadOverview();\n        })\n        .on('click', '#wpstg-use-target-dir', function(e) {\n          e.preventDefault();\n          $('#wpstg_clone_dir').val(this.getAttribute('data-path'));\n        })\n        .on('click', '#wpstg-use-target-hostname', function(e) {\n          e.preventDefault();\n          $('#wpstg_clone_hostname').val(this.getAttribute('data-uri'));\n        })\n        .on('change', '#wpstg-delete-upload-before-pushing', function(e) {\n          if (e.currentTarget.checked) {\n            $('#wpstg-backup-upload-container').show();\n          } else {\n            $('#wpstg-backup-upload-container').hide();\n            $('#wpstg-backup-upload-before-pushing').removeAttr('checked');\n          }\n        });\n  };\n\n\n  // Start the whole pushing process\n  const startProcess = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    // Click push changes button\n    $workFlow.on('click', '#wpstg-push-changes', function(e) {\n      e.preventDefault();\n\n      // Hide db tables and folder selection\n      cache.get('.wpstg-tabs-wrapper').hide();\n      cache.get('#wpstg-push-changes').hide();\n\n      // Show confirmation modal\n      const cloneName = cache.get('#wpstg-push-changes').data('clone-name');\n      const html = '<p class=\\'wpstg-push-confirmation-message\\'><b>WAIT!</b> This will overwrite the production/live site and its plugins, themes and media assets with data from the staging site: <b>\"' + cloneName + '\"</b>.  <br/><br/>Database data will be overwritten for each selected table. Take care if you use a shop system like WooCommerce and check out our FAQ! <br/><br/><b>IMPORTANT:</b> Before you proceed make sure that you have a full site backup. If the pushing process is not successful contact us at <a href=\\'mailto:support@wp-staging.com\\'>support@wp-staging.com</a> or use the <b>REPORT ISSUE</b> button.</p>';\n\n      confirmModal('Confirm Push!', html, 'Push', 'wpstg-confirm-push').then(function(result) {\n        if (result.value) {\n          cache.get('#wpstg-push-changes').attr('disabled', true);\n          cache.get('.wpstg-prev-step-link').attr('disabled', true);\n          cache.get('#wpstg-scanning-files').hide();\n          cache.get('.wpstg-progress-bar-wrapper').show();\n          cache.get('#wpstg-cancel-pushing').show(); // show cancel button\n          WPStaging.switchStep(3);\n          window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n          processing();\n\n          return;\n        }\n\n        // Show db tables and folder selection\n        cache.get('.wpstg-tabs-wrapper').show();\n        cache.get('#wpstg-push-changes').show();\n      });\n    })\n    // Cancel pushing process\n        .on('click', '#wpstg-cancel-pushing', function() {\n          if (!confirm('Are you sure you want to cancel pushing process?')) {\n            return false;\n          }\n          cancelPushingProcess();\n        });\n  };\n\n  var cancelPushingProcess = function cancelPushingProcess() {\n    WPStaging.ajax({\n      action: 'wpstg_cancel_push_processing',\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    }, function(response) {\n      if (response.success) {\n        that.isCancelled = true;\n        cache.get('.wpstg-loader').hide();\n        cache.get('#wpstg-cancel-pushing').hide();\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        WPStaging.loadOverview();\n        return;\n      }\n    }, 'json', false);\n  };\n\n  /**\n     * Start ajax processing\n     * @return string\n     */\n  var processing = function() {\n    // Show loader gif\n    cache.get('.wpstg-loader').show();\n\n    // Show logging window\n    cache.get('.wpstg-log-details').show();\n\n    // Get clone id\n    const cloneID = cache.get('#wpstg-push-changes').data('clone');\n\n    const deleteUploadsBeforePush = cache.get('#wpstg-delete-upload-before-pushing')[0].checked;\n    let backupUploadsBeforePush = false;\n    if (deleteUploadsBeforePush) {\n      backupUploadsBeforePush = cache.get('#wpstg-backup-upload-before-pushing')[0].checked;\n    }\n\n    let includedTables = getSelectedTablesToPush();\n    let excludedTables = getExcludedTables();\n    let allTablesExcluded = false;\n    that.isCancelled = false;\n\n    if (includedTables.length > excludedTables.length) {\n      includedTables = '';\n    } else if (excludedTables.length > includedTables.length) {\n      excludedTables = '';\n      allTablesExcluded = includedTables === '';\n    }\n\n    WPStaging.ajax(\n        {\n          action: 'wpstg_push_processing',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          clone: cloneID,\n          includedTables: includedTables,\n          excludedTables: excludedTables,\n          allTablesExcluded: allTablesExcluded,\n          selectedTablesWithoutPrefix: getSelectedTablesWithoutPrefix(),\n          includedDirectories: getIncludedDirectories(),\n          excludedDirectories: getExcludedDirectories(),\n          extraDirectories: getIncludedExtraDirectories(),\n          createBackupBeforePushing: cache.get('#wpstg-create-backup-before-pushing')[0].checked,\n          deletePluginsAndThemes: cache.get('#wpstg-remove-uninstalled-plugins-themes')[0].checked,\n          deleteUploadsBeforePushing: deleteUploadsBeforePush,\n          backupUploadsBeforePushing: backupUploadsBeforePush,\n        },\n        function(response) {\n          if (that.isCancelled) {\n            cancelPushingProcess();\n            cache.get('.wpstg-loader').hide();\n            cache.get('#wpstg-cancel-pushing').hide();\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n          // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                        'and try again. If that does not help, ' +\n                        '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' !== typeof (response.error) && response.error) {\n            WPStaging.showError(\n                'Something went wrong! Error: ' + response.message + '.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                        'and try again. If that does not help, ' +\n                        '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n\n          // Add Log messages\n          if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n            WPStaging.getLogs(response.last_msg);\n          }\n\n          // Continue processing\n          if (false === response.status) {\n            progressBar(response);\n            setTimeout(function() {\n              cache.get('.wpstg-loader').show();\n              processing();\n            }, wpstg.delayReq);\n          } else if (true === response.status) {\n            progressBar(response);\n            processing();\n          } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            isFinished(response);\n          }\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n     * Test database connection\n     * @return object\n     */\n  const connectDatabase = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    $workFlow.on('click', '#wpstg-db-connect', function(e) {\n      e.preventDefault();\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-db-status').hide();\n      WPStaging.ajax(\n          {\n            action: 'wpstg_database_connect',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            databaseUser: cache.get('#wpstg_db_username').val(),\n            databasePassword: cache.get('#wpstg_db_password').val(),\n            databaseServer: cache.get('#wpstg_db_server').val(),\n            databaseDatabase: cache.get('#wpstg_db_database').val(),\n            databasePrefix: cache.get('#wpstg_db_prefix').val(),\n          },\n          function(response) {\n            // Undefined Error\n            if (false === response) {\n              showError(\n                  'Something went wrong! Error: No response.' +\n                            'Please try again. If that does not help, ' +\n                            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n              );\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').remove();\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-failed\"> Failed</span>');\n              return;\n            }\n\n            // Throw Error\n            if ('undefined' !== typeof (response.errors) && response.errors) {\n              WPStaging.showError(\n                  'Something went wrong! Error: ' + response.errors +\n                            ' Please try again. If that does not help, ' +\n                            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n              );\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').hide();\n              cache.get('#wpstg-db-error').remove();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-failed\"> Failed</span><br/><span id=\"wpstg-db-error\" class=\"wpstg--red\">Error: ' + response.errors + '</span>');\n              return;\n            }\n\n            if ('undefined' !== typeof (response.success) && response.success) {\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').hide();\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-db-error').hide();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-success\"> Success</span>');\n            }\n          },\n          'json',\n          false,\n      );\n    });\n\n    // Make form fields editable\n    $workFlow.on('click', '#wpstg-ext-db', function() {\n      if (this.checked) {\n        cache.get('#wpstg_db_server').removeAttr('readonly');\n        cache.get('#wpstg_db_username').removeAttr('readonly');\n        cache.get('#wpstg_db_password').removeAttr('readonly');\n        cache.get('#wpstg_db_database').removeAttr('readonly');\n        cache.get('#wpstg_db_prefix').removeAttr('readonly');\n      } else {\n        cache.get('#wpstg_db_server').attr('readonly', true).val('');\n        cache.get('#wpstg_db_username').attr('readonly', true).val('');\n        cache.get('#wpstg_db_password').attr('readonly', true).val('');\n        cache.get('#wpstg_db_database').attr('readonly', true).val('');\n        cache.get('#wpstg_db_prefix').attr('readonly', true).val('');\n      }\n    });\n  };\n\n  const editCloneData = function() {\n    // Scan db and file system\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Load scanning data\n        .on('click', '.wpstg-edit-clone-data', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          // Disable button\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          // Get clone id\n          const cloneID = $(this).data('clone');\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_edit_clone_data',\n            clone: cloneID,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          // Send ajax request\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                $workFlow.html(response);\n              },\n              'HTML',\n          );\n        })\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          WPStaging.loadOverview();\n        })\n        .on('click', '#wpstg-save-clone-data', function(e) {\n          e.preventDefault();\n\n          const idPrefix = '#wpstg-edit-clone-data-';\n          const cloneID = cache.get(idPrefix + 'clone-id').val();\n          const cloneName = cache.get(idPrefix + 'clone-name').val();\n          const directoryName = cache.get(idPrefix + 'directory-name').val();\n          const path = cache.get(idPrefix + 'path').val();\n          const url = cache.get(idPrefix + 'url').val();\n          const prefix = cache.get(idPrefix + 'prefix').val();\n          const externalDBUser = cache.get(idPrefix + 'database-user').val();\n          const externalDBPassword = cache.get(idPrefix + 'database-password').val();\n          const externalDBDatabase = cache.get(idPrefix + 'database-database').val();\n          const externalDBHost = cache.get(idPrefix + 'database-server').val();\n          const externalDBPrefix = cache.get(idPrefix + 'database-prefix').val();\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_save_clone_data',\n            clone: cloneID,\n            cloneName: cloneName,\n            directoryName: directoryName,\n            path: path,\n            url: url,\n            prefix: prefix,\n            externalDBUser: externalDBUser,\n            externalDBPassword: externalDBPassword,\n            externalDBDatabase: externalDBDatabase,\n            externalDBHost: externalDBHost,\n            externalDBPrefix: externalDBPrefix,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                if (response === 'Success') {\n                  WPStaging.loadOverview();\n                } else {\n                  alert(response);\n                }\n              },\n              'HTML',\n          );\n        });\n  };\n\n  /**\n     * All jobs are finished\n     * @param {object} response\n     * @return object\n     */\n  var isFinished = function(response) {\n    progressBar(response);\n    cache.get('.wpstg-loader').text('Finished');\n    cache.get('.wpstg-loader').addClass('wpstg-finished');\n    cache.get('.wpstg-prev-step-link').attr('disabled', false);\n    cache.get('#wpstg-cancel-pushing').hide();\n\n    WPStagingCommon.getSwalModal(true, {\n      confirmButton: 'wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width',\n      popup: 'wpstg-swal-popup wpstg-push-finished centered-modal',\n    }).fire({\n      title: 'Push Successful!',\n      icon: 'success',\n      html: 'Delete site cache if required!',\n      width: '500px',\n      focusConfirm: true,\n    });\n  };\n\n  /**\n     * Get Included (Selected) Prefixed Database Tables\n     * @return {Array}\n     */\n  var getSelectedTablesToPush = function() {\n    if (that.tableSelector === null) {\n      return '';\n    }\n\n    return that.tableSelector.getIncludedTables();\n  };\n\n  /**\n     * Get Excluded (Unchecked) Prefixed Database Tables\n     * @return {Array}\n     */\n  var getExcludedTables = function() {\n    if (that.tableSelector === null) {\n      return '';\n    }\n\n    return that.tableSelector.getExcludedTables();\n  };\n\n  /**\n     * Get Non prefixed selected Database Tables\n     * @return {Array}\n     */\n  var getSelectedTablesWithoutPrefix = function() {\n    if (that.tableSelector === null) {\n      return '';\n    }\n\n    return that.tableSelector.getSelectedTablesWithoutPrefix();\n  };\n\n\n  /**\n     * A confirmation modal\n     *\n     * @param html\n     * @param confirmText\n     * @param confirmButtonClass\n     * @return Promise\n     */\n  var confirmModal = function(title, html, confirmText, confirmButtonClass) {\n    return WPStagingCommon.getSwalModal(false, {\n      container: 'wpstg-swal-push-container',\n      confirmButton: confirmButtonClass + ' wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n    }).fire({\n      title: title,\n      icon: 'warning',\n      html: html,\n      width: '750px',\n      focusConfirm: false,\n      confirmButtonText: confirmText,\n      showCancelButton: true,\n    });\n  };\n\n  /**\n     * Get Included Directories\n     * @return {Array}\n     */\n  var getIncludedDirectories = function() {\n    const includedDirectories = [];\n\n    $('.wpstg-dir input:checked').each(function() {\n      const $this = $(this);\n      if (!$this.parent('.wpstg-dir').parents('.wpstg-dir').children('.wpstg-expand-dirs').hasClass('disabled')) {\n        includedDirectories.push($this.val());\n      }\n    });\n\n    return includedDirectories;\n  };\n\n  /**\n     * Get Excluded Directories\n     * @return {Array}\n     */\n  var getExcludedDirectories = function() {\n    const excludedDirectories = [];\n\n    $('.wpstg-dir input:not(:checked)').each(function() {\n      const $this = $(this);\n      excludedDirectories.push($this.val());\n    });\n\n    return excludedDirectories;\n  };\n\n  /**\n     * Get Included Extra Directories\n     * @return {Array}\n     */\n  var getIncludedExtraDirectories = function() {\n    var extraDirectories = [];\n\n    if (!$('#wpstg_extraDirectories').val()) {\n      return extraDirectories;\n    }\n\n    var extraDirectories = $('#wpstg_extraDirectories').val().split(/\\r?\\n/);\n\n    return extraDirectories;\n  };\n\n  var progressBar = function(response, restart) {\n    if ('undefined' === typeof (response.percentage)) {\n      return false;\n    }\n\n    if (response.job === 'JobCreateBackup') {\n      cache.get('#wpstg-progress-backup').width(response.percentage * 0.15 + '%').html(response.percentage + '%');\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 1 of 4 Creating backup...');\n    }\n\n    if (response.job === 'jobFileScanning' || response.job === 'jobCopy') {\n      cache.get('#wpstg-progress-backup').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-backup').html('1. Backup');\n      // Assumption: All previous steps are done.\n      // This avoids bugs where some steps are skipped and the progress bar is incomplete as a result\n      cache.get('#wpstg-progress-backup').width('15%');\n\n      let percentage;\n      if (response.job === 'jobFileScanning') {\n        percentage = response.percentage / 2;\n      } else {\n        percentage = 50 + response.percentage / 2;\n      }\n\n      cache.get('#wpstg-progress-files').width(percentage * 0.3 + '%').html(percentage.toFixed(0) + '%');\n      cache.get('#wpstg-processing-status').html(percentage.toFixed(0) + '%' + ' - Step 2 of 4 Copying files...');\n    }\n\n    if (response.job === 'jobCopyDatabaseTmp' || response.job === 'jobSearchReplace' || response.job === 'jobData') {\n      cache.get('#wpstg-progress-files').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-files').html('2. Files');\n      cache.get('#wpstg-progress-files').width('30%');\n\n      let percentage = 0;\n      if (response.job === 'jobCopyDatabaseTmp') {\n        percentage = response.percentage / 3;\n      } else if (response.job === 'jobSearchReplace') {\n        percentage = 100 / 3 + response.percentage / 3;\n      } else {\n        percentage = 200 / 3 + response.percentage / 3;\n      }\n\n      cache.get('#wpstg-progress-data').width(percentage * 0.4 + '%').html(percentage.toFixed(0) + '%');\n      cache.get('#wpstg-processing-status').html(percentage.toFixed(0) + '%' + ' - Step 3 of 4 Copying data...');\n    }\n    if (response.job === 'jobDatabaseRename') {\n      cache.get('#wpstg-progress-data').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-data').html('3. Data');\n      cache.get('#wpstg-progress-data').width('40%');\n\n      cache.get('#wpstg-progress-finishing').width(response.percentage * 0.15 + '%').html(response.percentage + '%');\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 4 of 4 Finishing migration...');\n    }\n    if (response.status === 'finished') {\n      cache.get('#wpstg-progress-finishing').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-finishing').html('4. Finishing migration');\n      cache.get('#wpstg-progress-finishing').width('15%');\n\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Pushing Process Finished');\n    }\n  };\n\n  that.init = function() {\n    startProcess();\n    startScanning();\n    connectDatabase();\n    editCloneData();\n    new WpstgCloneEdit();\n    new WpstgRemoteStorage();\n  };\n\n  return that;\n}(jQuery);\n\njQuery(document).ready(function($) {\n  WPStagingPro.init();\n\n  jQuery(document).on('click', '#wpstg-update-mail-settings', function(e) {\n    e.preventDefault();\n\n    $('#wpstg-update-mail-settings').attr('disabled', 'disabled');\n    const data = {\n      action: 'wpstg_update_staging_mail_settings',\n      emailsAllowed: $('#wpstg_allow_emails').is(':checked'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        WPStagingCommon.getSwalModal().fire(\n            'Unknown error',\n            'Please get in contact with us to solve it support@wp-staging.com',\n            'error',\n        );\n      },\n      success: function(response) {\n        let alertType = 'error';\n        if (response.success) {\n          alertType = 'success';\n        }\n\n        WPStagingCommon.getSwalModal().fire('', response.message, alertType).then(function() {\n          jQuery('.wpstg-mails-notice').slideUp('fast');\n        });\n        $('#wpstg-update-mail-settings').removeAttr('disabled');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          WPStagingCommon.getSwalModal().fire(\n              '404',\n              'Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com',\n              'error',\n          );\n        },\n        500: function() {\n          WPStagingCommon.getSwalModal().fire(\n              '500',\n              'Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com',\n              'error',\n          );\n        },\n      },\n    });\n  });\n});\n\n// export default {}\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    setJobId: function(jobId) {\n      localStorage.setItem('jobIdBeingProcessed', jobId);\n    },\n    getJobId: function() {\n      return localStorage.getItem('jobIdBeingProcessed');\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    isEmpty: function(obj) {\n      for (const prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If a attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     * @return {string}\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param {function} errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n","import WPStagingCommon from './../wpstg.js';\n\n/**\n * Loader Modal\n */\nexport default class WpstgLoader {\n  constructor(\n      wpstgObject = wpstg,\n  ) {\n    this.wpstgObject = wpstgObject;\n  }\n\n  /**\n   * Show Swal alert with loader and send ajax request to fetch content of alert.\n   * @return Promise\n   */\n  showModal() {\n    const swalPromise = this.loadModal();\n    return swalPromise;\n  }\n\n  loadModal() {\n    return WPStagingCommon.getSwalModal(false, {\n      container: 'wpstg-swal2-container wpstg-swal2-loading wpstg-swal2-loading-sm',\n    }).fire({\n      title: '',\n      icon: 'warning',\n      html: this.getAjaxLoader(),\n      width: '100px',\n      focusConfirm: false,\n      showConfirmButton: false,\n      showCancelButton: false,\n    });\n  }\n\n  getAjaxLoader() {\n    return '<div class=\"wpstg-swal2-ajax-loader\"><img src=\"' + this.wpstgObject.wpstgIcon + '\" /></div>';\n  }\n}\n","\nimport WpstgLoader from '../../modules/wpstg-loader.js';\nimport * as dom from './../../modules/wpstg-dom-utils.js';\n\nexport default class WpstgRemoteStorage {\n  constructor(\n      revokeButtonSelector = '#wpstg-btn-provider-revoke',\n      revokeProviderFormSelector = '#wpstg-provider-revoke-form',\n      revokeAction = 'wpstg-provider-revoke',\n      settingsButtonSelector = '#wpstg-btn-save-provider-settings',\n      settingsFormSelector = '#wpstg-provider-settings-form',\n      settingsAction = 'wpstg-provider-settings',\n      authenticateButtonSelector = '#wpstg-btn-provider-authenticate',\n      authenticateFormSelector = '#wpstg-provider-authenticate-form',\n      authenticateAction = 'wpstg-provider-authenticate',\n      testConnectionButtonSelector = '#wpstg-btn-provider-test-connection',\n      testConnectionFieldsSelector = '#wpstg-provider-test-connection-fields',\n      testConnectionAction = 'wpstg-provider-test-connection',\n      wpstgObject = wpstg,\n  ) {\n    this.revokeButtonSelector = revokeButtonSelector;\n    this.revokeForm = dom.qs(revokeProviderFormSelector);\n    this.revokeAction = revokeAction;\n    this.settingsButtonSelector = settingsButtonSelector;\n    this.settingsForm = dom.qs(settingsFormSelector);\n    this.settingsAction = settingsAction;\n    this.authenticateButtonSelector = authenticateButtonSelector;\n    this.authenticateForm = dom.qs(authenticateFormSelector);\n    this.authenticateAction = authenticateAction;\n    this.testConnectionButtonSelector = testConnectionButtonSelector;\n    this.testConnectionFields = dom.qs(testConnectionFieldsSelector);\n    this.testConnectionAction = testConnectionAction;\n    this.wpstgObject = wpstgObject;\n    this.notyf = new Notyf({\n      duration: 2000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(document.body, 'click', this.revokeButtonSelector, async (target) => {\n      await this.sendRevokeRequest();\n    });\n\n    dom.addEvent(document.body, 'click', this.settingsButtonSelector, async (target) => {\n      await this.sendSettingsRequest();\n    });\n\n    dom.addEvent(document.body, 'click', this.authenticateButtonSelector, async (target) => {\n      await this.sendAuthenticateRequest();\n    });\n\n    dom.addEvent(document.body, 'click', this.testConnectionButtonSelector, async (target) => {\n      await this.sendTestConnectionRequest();\n    });\n\n    dom.addEvent(document.body, 'change', '[name=\\'ftp_type\\']', async (target) => {\n      await this.toggleSftpFields();\n    });\n\n    dom.addEvent(document.body, 'change', '[name=\\'s3_provider\\']', async (target) => {\n      await this.toggleS3GenericFields();\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  async sendRevokeRequest() {\n    const provider = this.revokeForm.querySelector('input[name=\"provider\"]').value;\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: new URLSearchParams({\n          action: this.revokeAction,\n          accessToken: this.wpstgObject.accessToken,\n          nonce: this.wpstgObject.nonce,\n          provider: provider,\n        }),\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`An error has occured: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data.success) {\n        this.notyf.success(data.message);\n        setTimeout(() => {\n          window.location.reload();\n        }, 3000);\n        return;\n      }\n\n      this.notyf.error(data.message);\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n\n  async sendSettingsRequest() {\n    const loader = new WpstgLoader();\n    const swal = loader.showModal();\n\n    const formData = new FormData(this.settingsForm);\n    formData.append('action', this.settingsAction);\n    formData.append('accessToken', this.wpstgObject.accessToken);\n    formData.append('nonce', this.wpstgObject.nonce);\n\n    const queryString = new URLSearchParams(formData);\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: queryString,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`An error has occured: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.success) {\n        this.notyf.error(data.message);\n      }\n\n      if (data.warning) {\n        this.notyf.open({\n          type: 'warning',\n          message: data.message,\n        });\n      } else {\n        this.notyf.success(data.message);\n      }\n\n      setTimeout(() => {\n        window.location.reload();\n      }, 2000);\n    } catch (error) {\n      console.warn(error);\n    } finally {\n      swal.close();\n    }\n  }\n\n  async sendAuthenticateRequest() {\n    const formData = new FormData(this.authenticateForm);\n    formData.append('action', this.authenticateAction);\n    formData.append('accessToken', this.wpstgObject.accessToken);\n    formData.append('nonce', this.wpstgObject.nonce);\n    const queryString = new URLSearchParams(formData);\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: queryString,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`An error has occured: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data.success) {\n        this.notyf.success(data.message);\n        setTimeout(() => {\n          window.location.reload();\n        }, 2000);\n        return;\n      }\n\n      this.notyf.error(data.message);\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n\n  async sendTestConnectionRequest() {\n    const loader = new WpstgLoader();\n    const swal = loader.showModal();\n\n    const fields = this.testConnectionFields.querySelectorAll('[name]');\n    const formData = new FormData();\n    formData.append('action', this.testConnectionAction);\n    formData.append('accessToken', this.wpstgObject.accessToken);\n    formData.append('nonce', this.wpstgObject.nonce);\n    fields.forEach((element) => {\n      console.log(element);\n      if (element.type === 'check' || element.type === 'checkbox') {\n        formData.append(element.getAttribute('name'), element.checked);\n        return;\n      }\n\n      formData.append(element.getAttribute('name'), element.value);\n    });\n\n    const queryString = new URLSearchParams(formData);\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: queryString,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`An error has occured: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data.success) {\n        this.notyf.success(data.message);\n        return;\n      }\n\n      this.notyf.error(data.message);\n    } catch (error) {\n      console.warn(error);\n    } finally {\n      swal.close();\n    }\n  }\n\n  toggleSftpFields() {\n    const ftpType = document.querySelector('[name=\\'ftp_type\\']');\n    const sftpElements = document.querySelectorAll('.only-sftp');\n    const ftpElements = document.querySelectorAll('.only-ftp');\n    if (ftpType.value === 'ftp') {\n      if (sftpElements.length) {\n        for (const el of sftpElements) {\n          el.classList.add('hidden');\n        }\n      }\n\n      if (ftpElements.length) {\n        for (const el of ftpElements) {\n          el.classList.remove('hidden');\n        }\n      }\n\n      return;\n    }\n\n    if (sftpElements.length) {\n      for (const el of sftpElements) {\n        el.classList.remove('hidden');\n      }\n    }\n\n    if (ftpElements.length) {\n      for (const el of ftpElements) {\n        el.classList.add('hidden');\n      }\n    }\n  }\n\n  toggleS3GenericFields() {\n    const s3Provider = document.querySelector('[name=\\'s3_provider\\']');\n    const isCustomProvider = s3Provider.value === '';\n    const customFieldsContainer = document.getElementById('wpstg-s3-custom-provider-fields');\n    customFieldsContainer.style.display = isCustomProvider ? 'block' : 'none';\n  }\n}\n"],"names":["qs","selector","document","querySelector","addEvent","parent","evt","handler","Element","addEventListener","event","target","matches","closest","prototype","msMatchesSelector","webkitMatchesSelector","s","el","this","call","parentElement","parentNode","nodeType","WpstgCloneEdit","workflowSelector","dbCheckTriggerClass","wpstgObject","databaseCheckAction","wpstg","workflow","dom","dbCheckTimer","abortDbCheckController","dbCheckCallStatus","notyf","Notyf","duration","position","x","y","dismissible","types","type","background","icon","init","addEvents","forEach","_this","abort","clearTimeout","setTimeout","checkDatabase","idPrefix","externalDBUser","value","externalDBPassword","externalDBDatabase","externalDBHost","externalDBPrefix","AbortController","fetch","ajaxUrl","method","signal","credentials","body","URLSearchParams","action","accessToken","nonce","databaseUser","databasePassword","databaseServer","databaseDatabase","databasePrefix","databaseEnsurePrefixTableExist","headers","then","response","_this2","ok","json","Promise","reject","data","dismissAll","error","i18n","disabled","errors","success","open","message","console","warn","WpstgPushTableSelection","inputSelector","input","cloneID","getAttribute","tablePrefix","isNetwork","areAllTablesChecked","showAllTables","selectDefaultTables","toggleTableSelection","countSelectedTables","includedTables","getIncludedTables","excludedTables","getExcludedTables","length","clone","selectedTablesWithoutPrefix","getSelectedTablesWithoutPrefix","innerHTML","content","element","style","opacity","transitionProperty","transitionDuration","window","display","removeProperty","getRegexPattern","pattern","isMultisite","options","querySelectorAll","option","match","selected","regexPattern","name","push","join","settings","directorySeparator","tables","tablesCount","tablesCountElement","classList","add","remove","replace","WpstgPushFileSelection","filesTabSelector","dirSelector","filesTab","toggleChildren","countSelectedFiles","result","cb","checked","filesCount","filesCountElement","themesCount","pluginsCount","head","nextSibling","onOver","onOut","pX","pY","mouseOver","focused","h","state","timer","sensitivity","interval","timeout","handleFocus","tracker","e","clientX","clientY","compare","Math","abs","undefined","dispatchOver","removeEventListener","onMouseOver","dispatchOut","delay","onMouseOut","onFocus","onBlur","removeFocus","opt","focusOptionChanged","Object","assign","$","that","cache","cancelPushingProcess","processing","isFinished","getSelectedTablesToPush","confirmModal","getIncludedDirectories","getExcludedDirectories","getIncludedExtraDirectories","progressBar","WPStagingCommon","continueErrorHandle","elements","get","inArray","refresh","setJobId","jobId","localStorage","setItem","getJobId","getItem","listenTooltip","wpstgHoverIntent","visibility","isEmpty","obj","prop","hasOwnProperty","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","Error","Array","shift","isLoading","show","hide","slugify","url","toString","toLowerCase","normalize","showAjaxFatalError","prependMessage","appendMessage","showError","WPStaging","warnIfClosingDuringProcess","handleFetchErrors","status","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","incrementRatio","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","xhr","textStatus","errorThrown","log","errorCode","statusCode","jQuery","WpstgLoader","showModal","loadModal","container","getAjaxLoader","width","focusConfirm","wpstgIcon","WpstgRemoteStorage","revokeButtonSelector","revokeProviderFormSelector","revokeAction","settingsButtonSelector","settingsFormSelector","settingsAction","authenticateButtonSelector","authenticateFormSelector","authenticateAction","testConnectionButtonSelector","testConnectionFieldsSelector","testConnectionAction","revokeForm","settingsForm","authenticateForm","testConnectionFields","sendRevokeRequest","sendSettingsRequest","sendAuthenticateRequest","sendTestConnectionRequest","toggleSftpFields","toggleS3GenericFields","provider","location","reload","loader","swal","formData","FormData","append","queryString","warning","fields","ftpType","sftpElements","ftpElements","isCustomProvider","getElementById","WPStagingPro","isCancelled","loadOverview","deleteUploadsBeforePush","backupUploadsBeforePush","allTablesExcluded","includedDirectories","excludedDirectories","extraDirectories","createBackupBeforePushing","deletePluginsAndThemes","deleteUploadsBeforePushing","backupUploadsBeforePushing","last_msg","getLogs","delayReq","job_done","addClass","attr","tableSelector","confirmText","confirmButtonClass","confirmButtonText","each","$this","parents","children","hasClass","val","split","restart","percentage","job","toFixed","fileSelector","$workFlow","on","preventDefault","cloneName","switchStep","confirm","currentTarget","removeAttr","after","connectDatabase","directoryName","path","prefix","alert","editCloneData","ready","emailsAllowed","is","alertType","slideUp"],"mappings":"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"}