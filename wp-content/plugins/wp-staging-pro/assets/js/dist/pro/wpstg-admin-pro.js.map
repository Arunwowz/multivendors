{"version":3,"file":"wpstg-admin-pro.js","sources":["../../src/modules/wpstg-polyfill.js","../../src/modules/wpstg-dom-utils.js","../../src/pro/modules/wpstg-clone-edit.js","../../src/pro/modules/wpstg-push-table-selection.js","../../src/pro/modules/wpstg-push-file-selection.js","../../src/modules/wpstg-hover-intent.js","../../src/wpstg.js","../../src/modules/wpstg-loader.js","../../src/pro/modules/wpstg-remote-storage.js","../../src/pro/wpstg-admin-pro.js"],"sourcesContent":["/**\n * Polyfills the `Element.prototype.closest` function if not available in the browser.\n *\n * @return {Function} A function that will return the closest element, by selector, to this element.\n */\nfunction polyfillClosest() {\n  if (Element.prototype.closest) {\n    if (!Element.prototype.matches) {\n      Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n    }\n\n    Element.prototype.closest = function(s) {\n      let el = this;\n\n      do {\n        if (Element.prototype.matches.call(el, s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType === 1);\n      return null;\n    };\n  }\n\n  return function(element, selector) {\n    return element instanceof Element ? element.closest(selector) : null;\n  };\n}\n\nexport const closest = polyfillClosest();\n","import {closest} from './wpstg-polyfill';\n\n/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  if (!parent instanceof Element) {\n    return;\n  }\n\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function fadeOut(element, duration = 300) {\n  element.style.opacity = 1;\n  element.style.transitionProperty = 'opacity';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.opacity = 0;\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('opacity');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n\n/**\n * Dispatches a change on an element that will trigger, depending on the element type,\n * cascading changes on elements dependant on the one that triggered the change and that\n * belong in the same container.\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleDisplayDependencies(element) {\n  if (!element instanceof Element || !element.id) {\n    return;\n  }\n\n  const containerSelector = '.wpstg-container';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n  const elementType = element.getAttribute('type');\n\n  switch (elementType) {\n    case 'checkbox':\n      // Go as high as the container that contains this element.\n      const container = closest(element, containerSelector);\n\n      if (container === null) {\n        return;\n      }\n\n      const showIfChecked = container.querySelectorAll(`[data-show-if-checked=\"${element.id}\"]`);\n      const showIfUnchecked = container.querySelectorAll(`[data-show-if-unchecked=\"${element.id}\"]`);\n      const checked = element.checked;\n\n      if (showIfChecked.length) {\n        for (const el of showIfChecked) {\n          if (checked) {\n            el.classList.remove(hiddenClass);\n          } else {\n            el.classList.add(hiddenClass);\n          }\n        }\n      }\n\n      if (showIfUnchecked.length) {\n        for (const el of showIfUnchecked) {\n          if (checked) {\n            el.classList.add(hiddenClass);\n          } else {\n            el.classList.remove(hiddenClass);\n          }\n        }\n      }\n\n      return;\n    default:\n      // Not a type we handle.\n      return;\n  }\n}\n\n/**\n * Initializes the display status of any element that depends on the status of another to\n * either hide or show.\n *\n * @return {void} The function will have the side-effect to toggle the hide/show class from\n *                elements dependant on another to hide or show.\n */\nexport function initDependantDisplay() {\n  const displayControllerSelector = '[onchange^=\"WPStaging.handleDisplayDependencies\"]';\n  const displayControllers = document.querySelectorAll(displayControllerSelector);\n  for (const displayController of displayControllers) {\n    handleDisplayDependencies(displayController);\n  }\n}\n\n/**\n * Toggle target element set in data-wpstg-target of the given element\n *\n * @param {Element} element A reference to the Element the change was triggered from.\n *\n * @return {void} The function does not return any value and will have the side-effect of\n *                hiding or showing dependant elements.\n */\nexport function handleToggleElement(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n  // Use the default WordPress CSS class to hide and show the objects.\n  const hiddenClass = 'hidden';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.classList.toggle(hiddenClass);\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-copy to element(s) in data-wpstg-target\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyPaste(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-target') || !element.getAttribute('data-wpstg-copy')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  navigator.clipboard.writeText(element.getAttribute('data-wpstg-copy'));\n  const elements = container.querySelectorAll(element.getAttribute('data-wpstg-target'));\n\n  if (elements.length) {\n    for (const el of elements) {\n      el.value = element.getAttribute('data-wpstg-copy', '');\n    }\n  }\n}\n\n/**\n * Copy text in data-wpstg-source to clipboard\n *\n * @param {Element} element\n *\n * @return {void}\n */\nexport function handleCopyToClipboard(element) {\n  if (!element instanceof Element || !element.getAttribute('data-wpstg-source')) {\n    return;\n  }\n\n  const containerSelector = '.wpstg_admin';\n\n  // Go as high as the container that contains this element.\n  const container = closest(element, containerSelector);\n\n  if (container === null) {\n    return;\n  }\n\n  const el = container.querySelector(element.getAttribute('data-wpstg-source'));\n\n  if (el) {\n    navigator.clipboard.writeText(el.value);\n  }\n}\n\n","\nimport * as dom from './../../modules/wpstg-dom-utils.js';\n\n// Delay time in millisecond after which the request is send to check db connection\n// This is to make sure we have not many ajax request even when they were not required i.e. while typing.\nexport const DELAY_TIME_DB_CHECK = 300;\nexport default class WpstgCloneEdit {\n  constructor(\n      workflowSelector = '#wpstg-workflow',\n      dbCheckTriggerClass = '.wpstg-edit-clone-db-inputs',\n      wpstgObject = wpstg,\n      databaseCheckAction = 'wpstg_database_connect',\n  ) {\n    this.workflow = dom.qs(workflowSelector);\n    this.dbCheckTriggerClass = dbCheckTriggerClass;\n    this.wpstgObject = wpstgObject;\n    this.databaseCheckAction = databaseCheckAction;\n    this.dbCheckTimer = null;\n    this.abortDbCheckController = null;\n    this.dbCheckCallStatus = false;\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    // early bail if workflow object not available.\n    if (this.workflow === null) {\n      return;\n    }\n\n    ['paste', 'input'].forEach( (evt) => {\n      dom.addEvent(this.workflow, evt, this.dbCheckTriggerClass, () => {\n        // abort previous database check call if it was running\n        if (this.dbCheckCallStatus === true) {\n          this.abortDbCheckController.abort();\n          this.abortDbCheckController = null;\n          this.dbCheckCallStatus = false;\n        }\n\n        // check for db connection after specific delay but reset the timer if these event occur again\n        clearTimeout(this.dbCheckTimer);\n        this.dbCheckTimer = setTimeout(() => {\n          this.checkDatabase();\n        }, DELAY_TIME_DB_CHECK);\n      });\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  checkDatabase() {\n    const idPrefix = '#wpstg-edit-clone-data-';\n    const externalDBUser = dom.qs(idPrefix + 'database-user').value;\n    const externalDBPassword = dom.qs(idPrefix + 'database-password').value;\n    const externalDBDatabase = dom.qs(idPrefix + 'database-database').value;\n    const externalDBHost = dom.qs(idPrefix + 'database-server').value;\n    const externalDBPrefix = dom.qs(idPrefix + 'database-prefix').value;\n\n    if (externalDBUser === '' && externalDBPassword === '' && externalDBDatabase === '' && externalDBPrefix === '') {\n      dom.qs('#wpstg-save-clone-data').disabled = false;\n      return;\n    }\n\n    this.abortDbCheckController = new AbortController();\n    this.dbCheckCallStatus = true;\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      signal: this.abortDbCheckController.signal,\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.databaseCheckAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        databaseUser: externalDBUser,\n        databasePassword: externalDBPassword,\n        databaseServer: externalDBHost,\n        databaseDatabase: externalDBDatabase,\n        databasePrefix: externalDBPrefix,\n        databaseEnsurePrefixTableExist: true,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      this.dbCheckCallStatus = false;\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // dismiss previous toasts\n      this.notyf.dismissAll();\n      // failed request\n      if (false === data) {\n        this.notyf.error(this.wpstgObject.i18n['dbConnectionFailed']);\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // failed db connection\n      if ('undefined' !== typeof (data.errors) && data.errors && 'undefined' !== typeof (data.success) && data.success === 'false') {\n        this.notyf.error(this.wpstgObject.i18n['dbConnectionFailed'] +'! <br/> Error: '+ data.errors);\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // prefix warning\n      if ('undefined' !== typeof (data.errors) && data.errors && 'undefined' !== typeof (data.success) && data.success === 'true') {\n        this.notyf.open({\n          type: 'warning',\n          message: 'Warning: ' + data.errors,\n        });\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // db connection successful\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.notyf.success(this.wpstgObject.i18n['dbConnectionSuccess']);\n        dom.qs('#wpstg-save-clone-data').disabled = false;\n      }\n    }).catch((error) => {\n      this.dbCheckCallStatus = false;\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n      dom.qs('#wpstg-save-clone-data').disabled = true;\n    });\n  }\n}\n","\nimport * as dom from './../../modules/wpstg-dom-utils';\n\n/**\n * Push Table Selection\n */\nexport default class WpstgPushTableSelection {\n  constructor(\n      workflowSelector = '#wpstg-workflow',\n      inputSelector = '#wpstg_select_tables_pushing',\n      wpstgObject = wpstg,\n  ) {\n    this.workflow = dom.qs(workflowSelector);\n    this.inputSelector = inputSelector;\n    this.input = dom.qs(inputSelector);\n    this.wpstgObject = wpstgObject;\n    this.cloneID = this.input.getAttribute('data-clone');\n    this.tablePrefix = this.input.getAttribute('data-prefix');\n    this.isNetwork = this.input.getAttribute('data-network') === 'true';\n    this.areAllTablesChecked = true;\n\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(document.body, 'click', '.wpstg-button-show-tables', (target) => {\n      this.showAllTables();\n    });\n\n    dom.addEvent(document.body, 'click', '.wpstg-button-db-prefix', () => {\n      this.selectDefaultTables();\n    });\n\n    dom.addEvent(document.body, 'click', '.wpstg-button-unselect', () => {\n      this.toggleTableSelection();\n    });\n\n    dom.addEvent(document.body, 'change', this.inputSelector, () => {\n      this.countSelectedTables();\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  showAllTables() {\n    let includedTables = this.getIncludedTables();\n    let excludedTables = this.getExcludedTables();\n\n    if (includedTables.length > excludedTables.length) {\n      includedTables = '';\n    } else if (excludedTables.length > includedTables.length) {\n      excludedTables = '';\n    }\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: 'wpstg_push_tables',\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        clone: this.cloneID,\n        includedTables: includedTables,\n        excludedTables: excludedTables,\n        selectedTablesWithoutPrefix: this.getSelectedTablesWithoutPrefix(),\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // Reload current page if successful.\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.input.innerHTML = data.content;\n        dom.fadeOut(dom.qs('.wpstg-button-show-tables'), 300);\n\n        this.countSelectedTables();\n        return;\n      }\n\n      // There will be message probably in case of error\n      if ('undefined' !== typeof (data.message)) {\n        this.notyf.error(data.message);\n        return;\n      }\n\n      this.notyf.error(this.wpstgObject.i18n['somethingWentWrong']);\n    }).catch((error) => {\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n    });\n  }\n\n  getRegexPattern() {\n    let pattern = '^' + this.tablePrefix;\n    if (this.wpstgObject.isMultisite === '1' && !this.isNetwork) {\n      pattern += '([^0-9])_*';\n    }\n\n    return pattern;\n  }\n\n  selectDefaultTables() {\n    const options = this.input.querySelectorAll('.wpstg-db-table');\n    const pattern = this.getRegexPattern();\n    options.forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(pattern)) {\n        option.selected = true;\n      } else {\n        option.selected = false;\n      }\n    });\n\n    this.countSelectedTables();\n  }\n\n  toggleTableSelection() {\n    if (false === this.areAllTablesChecked) {\n      this.input.querySelectorAll('.wpstg-db-table').forEach((option) => {\n        option.selected = true;\n      });\n\n      this.workflow.querySelector('.wpstg-button-unselect').innerHTML = 'Unselect All';\n      this.areAllTablesChecked = true;\n    } else {\n      this.input.querySelectorAll('.wpstg-db-table').forEach((option) => {\n        option.selected = false;\n      });\n      this.workflow.querySelector('.wpstg-button-unselect').innerHTML = 'Select All';\n      this.areAllTablesChecked = false;\n    }\n\n    this.countSelectedTables();\n  }\n\n  getSelectedTablesWithoutPrefix() {\n    const selectedTablesWithoutPrefix = [];\n    const regexPattern = this.getRegexPattern();\n    this.input.querySelectorAll('option:checked').forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (!name.match(regexPattern)) {\n        selectedTablesWithoutPrefix.push(name);\n      }\n    });\n\n    return selectedTablesWithoutPrefix.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  getIncludedTables() {\n    const tables = [];\n    const regexPattern = this.getRegexPattern();\n    this.input.querySelectorAll('option:checked').forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        tables.push(name);\n      }\n    });\n\n    return tables.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  getExcludedTables() {\n    const tables = [];\n    const regexPattern = this.getRegexPattern();\n    this.input.querySelectorAll('option:not(:checked)').forEach((option) => {\n      const name = option.getAttribute('name', '');\n      if (name.match(regexPattern)) {\n        tables.push(name);\n      }\n    });\n\n    return tables.join(this.wpstgObject.settings.directorySeparator);\n  }\n\n  countSelectedTables() {\n    const tablesCount = this.input.querySelectorAll('option:checked').length;\n    const tablesCountElement = dom.qs('#wpstg-tables-count');\n    if (tablesCount === 0) {\n      tablesCountElement.classList.add('danger');\n      tablesCountElement.innerHTML = this.wpstgObject.i18n['noTableSelected'];\n    } else {\n      tablesCountElement.classList.remove('danger');\n      tablesCountElement.innerHTML = this.wpstgObject.i18n['tablesSelected'].replace('{d}', tablesCount);\n    }\n  }\n}\n","\nimport * as dom from './../../modules/wpstg-dom-utils';\n\n/**\n * Push File Selection\n */\nexport default class WpstgPushFileSelection {\n  constructor(\n      workflowSelector = '#wpstg-workflow',\n      filesTabSelector = '#wpstg-scanning-files',\n      dirSelector = '.wpstg-check-dir',\n      wpstgObject = wpstg,\n  ) {\n    this.workflow = dom.qs(workflowSelector);\n    this.filesTabSelector = filesTabSelector;\n    this.filesTab = dom.qs(filesTabSelector);\n    this.dirSelector = dirSelector;\n    this.wpstgObject = wpstgObject;\n\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(this.workflow, 'change', this.filesTabSelector + ' ' + this.dirSelector, (el) => {\n      this.toggleChildren(el);\n      this.countSelectedFiles();\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  toggleChildren(el) {\n    const parent = dom.getParents(el, '.wpstg-dir')[0];\n    const checkboxes = parent.querySelectorAll('.wpstg-subdir>.wpstg-dir>' + this.dirSelector);\n    checkboxes.forEach((cb) => {\n      cb.checked = el.checked;\n    });\n  }\n\n  countSelectedFiles() {\n    const filesCount = this.filesTab.querySelectorAll(this.dirSelector + ':checked').length;\n    const filesCountElement = dom.qs('#wpstg-files-count');\n    if (filesCount === 0) {\n      filesCountElement.classList.add('danger');\n      filesCountElement.innerHTML = this.wpstgObject.i18n['noFileSelected'];\n    } else {\n      let themesCount = 0;\n      let pluginsCount = 0;\n      filesCountElement.classList.remove('danger');\n      this.filesTab.querySelectorAll('.wpstg-dir:not(.wpstg-sub-dir)>.wpstg-expand-dirs').forEach((head) => {\n        if (head.innerHTML === 'plugins') {\n          pluginsCount = head.nextSibling.querySelectorAll(this.dirSelector + ':checked').length;\n        }\n\n        if (head.innerHTML === 'themes') {\n          themesCount = head.nextSibling.querySelectorAll(this.dirSelector + ':checked').length;\n        }\n      });\n\n      filesCountElement.innerHTML = this.wpstgObject.i18n['filesSelected'].replace('{t}', themesCount).replace('{p}', pluginsCount);\n    }\n  }\n}\n","'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    setJobId: function(jobId) {\n      localStorage.setItem('jobIdBeingProcessed', jobId);\n    },\n    getJobId: function() {\n      return localStorage.getItem('jobIdBeingProcessed');\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    isEmpty: function(obj) {\n      for (const prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If a attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     * @return {string}\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param {function} errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n","import WPStagingCommon from './../wpstg.js';\n\n/**\n * Loader Modal\n */\nexport default class WpstgLoader {\n  constructor(\n      wpstgObject = wpstg,\n  ) {\n    this.wpstgObject = wpstgObject;\n  }\n\n  /**\n   * Show Swal alert with loader and send ajax request to fetch content of alert.\n   * @return Promise\n   */\n  showModal() {\n    const swalPromise = this.loadModal();\n    return swalPromise;\n  }\n\n  loadModal() {\n    return WPStagingCommon.getSwalModal(false, {\n      container: 'wpstg-swal2-container wpstg-swal2-loading wpstg-swal2-loading-sm',\n    }).fire({\n      title: '',\n      icon: 'warning',\n      html: this.getAjaxLoader(),\n      width: '100px',\n      focusConfirm: false,\n      showConfirmButton: false,\n      showCancelButton: false,\n    });\n  }\n\n  getAjaxLoader() {\n    return '<div class=\"wpstg-swal2-ajax-loader\"><img src=\"' + this.wpstgObject.wpstgIcon + '\" /></div>';\n  }\n}\n","\nimport WpstgLoader from '../../modules/wpstg-loader.js';\nimport * as dom from './../../modules/wpstg-dom-utils.js';\n\nexport default class WpstgRemoteStorage {\n  constructor(\n      revokeButtonSelector = '#wpstg-btn-provider-revoke',\n      revokeProviderFormSelector = '#wpstg-provider-revoke-form',\n      revokeAction = 'wpstg-provider-revoke',\n      settingsButtonSelector = '#wpstg-btn-save-provider-settings',\n      settingsFormSelector = '#wpstg-provider-settings-form',\n      settingsAction = 'wpstg-provider-settings',\n      authenticateButtonSelector = '#wpstg-btn-provider-authenticate',\n      authenticateFormSelector = '#wpstg-provider-authenticate-form',\n      authenticateAction = 'wpstg-provider-authenticate',\n      testConnectionButtonSelector = '#wpstg-btn-provider-test-connection',\n      testConnectionFieldsSelector = '#wpstg-provider-test-connection-fields',\n      testConnectionAction = 'wpstg-provider-test-connection',\n      wpstgObject = wpstg,\n  ) {\n    this.revokeButtonSelector = revokeButtonSelector;\n    this.revokeForm = dom.qs(revokeProviderFormSelector);\n    this.revokeAction = revokeAction;\n    this.settingsButtonSelector = settingsButtonSelector;\n    this.settingsForm = dom.qs(settingsFormSelector);\n    this.settingsAction = settingsAction;\n    this.authenticateButtonSelector = authenticateButtonSelector;\n    this.authenticateForm = dom.qs(authenticateFormSelector);\n    this.authenticateAction = authenticateAction;\n    this.testConnectionButtonSelector = testConnectionButtonSelector;\n    this.testConnectionFields = dom.qs(testConnectionFieldsSelector);\n    this.testConnectionAction = testConnectionAction;\n    this.wpstgObject = wpstgObject;\n    this.notyf = new Notyf({\n      duration: 2000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    dom.addEvent(document.body, 'click', this.revokeButtonSelector, async (target) => {\n      await this.sendRevokeRequest();\n    });\n\n    dom.addEvent(document.body, 'click', this.settingsButtonSelector, async (target) => {\n      await this.sendSettingsRequest();\n    });\n\n    dom.addEvent(document.body, 'click', this.authenticateButtonSelector, async (target) => {\n      await this.sendAuthenticateRequest();\n    });\n\n    dom.addEvent(document.body, 'click', this.testConnectionButtonSelector, async (target) => {\n      await this.sendTestConnectionRequest();\n    });\n\n    dom.addEvent(document.body, 'change', '[name=\\'ftp_type\\']', async (target) => {\n      await this.toggleSftpFields();\n    });\n\n    dom.addEvent(document.body, 'change', '[name=\\'s3_provider\\']', async (target) => {\n      await this.toggleS3GenericFields();\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  async sendRevokeRequest() {\n    const provider = this.revokeForm.querySelector('input[name=\"provider\"]').value;\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: new URLSearchParams({\n          action: this.revokeAction,\n          accessToken: this.wpstgObject.accessToken,\n          nonce: this.wpstgObject.nonce,\n          provider: provider,\n        }),\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`An error has occured: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data.success) {\n        this.notyf.success(data.message);\n        setTimeout(() => {\n          window.location.reload();\n        }, 3000);\n        return;\n      }\n\n      this.notyf.error(data.message);\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n\n  async sendSettingsRequest() {\n    const loader = new WpstgLoader();\n    const swal = loader.showModal();\n\n    const formData = new FormData(this.settingsForm);\n    formData.append('action', this.settingsAction);\n    formData.append('accessToken', this.wpstgObject.accessToken);\n    formData.append('nonce', this.wpstgObject.nonce);\n\n    const queryString = new URLSearchParams(formData);\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: queryString,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`An error has occured: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.success) {\n        this.notyf.error(data.message);\n      }\n\n      if (data.warning) {\n        this.notyf.open({\n          type: 'warning',\n          message: data.message,\n        });\n      } else {\n        this.notyf.success(data.message);\n      }\n\n      setTimeout(() => {\n        window.location.reload();\n      }, 2000);\n    } catch (error) {\n      console.warn(error);\n    } finally {\n      swal.close();\n    }\n  }\n\n  async sendAuthenticateRequest() {\n    const formData = new FormData(this.authenticateForm);\n    formData.append('action', this.authenticateAction);\n    formData.append('accessToken', this.wpstgObject.accessToken);\n    formData.append('nonce', this.wpstgObject.nonce);\n    const queryString = new URLSearchParams(formData);\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: queryString,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`An error has occured: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data.success) {\n        this.notyf.success(data.message);\n        setTimeout(() => {\n          window.location.reload();\n        }, 2000);\n        return;\n      }\n\n      this.notyf.error(data.message);\n    } catch (error) {\n      console.warn(error);\n    }\n  }\n\n  async sendTestConnectionRequest() {\n    const loader = new WpstgLoader();\n    const swal = loader.showModal();\n\n    const fields = this.testConnectionFields.querySelectorAll('[name]');\n    const formData = new FormData();\n    formData.append('action', this.testConnectionAction);\n    formData.append('accessToken', this.wpstgObject.accessToken);\n    formData.append('nonce', this.wpstgObject.nonce);\n    fields.forEach((element) => {\n      console.log(element);\n      if (element.type === 'check' || element.type === 'checkbox') {\n        formData.append(element.getAttribute('name'), element.checked);\n        return;\n      }\n\n      formData.append(element.getAttribute('name'), element.value);\n    });\n\n    const queryString = new URLSearchParams(formData);\n    try {\n      const response = await fetch(this.wpstgObject.ajaxUrl, {\n        method: 'POST',\n        credentials: 'same-origin',\n        body: queryString,\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n      });\n\n      if (!response.ok) {\n        console.error(`An error has occured: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (data.success) {\n        this.notyf.success(data.message);\n        return;\n      }\n\n      this.notyf.error(data.message);\n    } catch (error) {\n      console.warn(error);\n    } finally {\n      swal.close();\n    }\n  }\n\n  toggleSftpFields() {\n    const ftpType = document.querySelector('[name=\\'ftp_type\\']');\n    const sftpElements = document.querySelectorAll('.only-sftp');\n    const ftpElements = document.querySelectorAll('.only-ftp');\n    if (ftpType.value === 'ftp') {\n      if (sftpElements.length) {\n        for (const el of sftpElements) {\n          el.classList.add('hidden');\n        }\n      }\n\n      if (ftpElements.length) {\n        for (const el of ftpElements) {\n          el.classList.remove('hidden');\n        }\n      }\n\n      return;\n    }\n\n    if (sftpElements.length) {\n      for (const el of sftpElements) {\n        el.classList.remove('hidden');\n      }\n    }\n\n    if (ftpElements.length) {\n      for (const el of ftpElements) {\n        el.classList.add('hidden');\n      }\n    }\n  }\n\n  toggleS3GenericFields() {\n    const s3Provider = document.querySelector('[name=\\'s3_provider\\']');\n    const isCustomProvider = s3Provider.value === '';\n    const customFieldsContainer = document.getElementById('wpstg-s3-custom-provider-fields');\n    customFieldsContainer.style.display = isCustomProvider ? 'block' : 'none';\n  }\n}\n","import WpstgCloneEdit from './modules/wpstg-clone-edit.js';\nimport WpstgPushTableSelection from './modules/wpstg-push-table-selection.js';\nimport WpstgPushFileSelection from './modules/wpstg-push-file-selection.js';\nimport WpstgRemoteStorage from './modules/wpstg-remote-storage.js';\nimport WPStagingCommon from '../wpstg.js';\n\nconst WPStagingPro = function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n    tableSelector: null,\n    fileSelector: null,\n  };\n\n  // Cache Elements\n  const cache = {elements: []};\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n\n  /**\n     * Ajax Scanning before starting push process\n     */\n  const startScanning = function() {\n    // Scan db and file system\n    const $workFlow = cache.get('#wpstg-workflow');\n\n\n    $workFlow\n    // Load scanning data\n        .on('click', '.wpstg-push-changes', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          // Disable button\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          // Add loading overlay\n          $workFlow.addClass('loading');\n\n          // Get clone id\n          // var cloneID = $this.data(\"clone\");\n          // Get clone id\n          const cloneID = $(this).data('clone');\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_scan',\n            clone: cloneID,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          // Send ajax request\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                                'and try again. If that does not help, ' +\n                                '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n                  );\n                }\n\n                // Styling of elements\n                $workFlow.removeClass('loading').html(response);\n\n                WPStaging.switchStep(2);\n\n                cache.get('.wpstg-step3-cloning').hide();\n                cache.get('.wpstg-step3-pushing').show();\n\n                cache.get('.wpstg-loader').hide();\n                that.tableSelector = new WpstgPushTableSelection();\n                that.fileSelector = new WpstgPushFileSelection();\n                that.tableSelector.countSelectedTables();\n                that.fileSelector.countSelectedFiles();\n                // cache.get(\".wpstg-loader\").hide();\n              },\n              'HTML',\n          );\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          WPStaging.loadOverview();\n        })\n        .on('click', '#wpstg-use-target-dir', function(e) {\n          e.preventDefault();\n          $('#wpstg_clone_dir').val(this.getAttribute('data-path'));\n        })\n        .on('click', '#wpstg-use-target-hostname', function(e) {\n          e.preventDefault();\n          $('#wpstg_clone_hostname').val(this.getAttribute('data-uri'));\n        })\n        .on('change', '#wpstg-delete-upload-before-pushing', function(e) {\n          if (e.currentTarget.checked) {\n            $('#wpstg-backup-upload-container').show();\n          } else {\n            $('#wpstg-backup-upload-container').hide();\n            $('#wpstg-backup-upload-before-pushing').removeAttr('checked');\n          }\n        });\n  };\n\n\n  // Start the whole pushing process\n  const startProcess = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    // Click push changes button\n    $workFlow.on('click', '#wpstg-push-changes', function(e) {\n      e.preventDefault();\n\n      // Hide db tables and folder selection\n      cache.get('.wpstg-tabs-wrapper').hide();\n      cache.get('#wpstg-push-changes').hide();\n\n      // Show confirmation modal\n      const cloneName = cache.get('#wpstg-push-changes').data('clone-name');\n      const html = '<p class=\\'wpstg-push-confirmation-message\\'><b>WAIT!</b> This will overwrite the production/live site and its plugins, themes and media assets with data from the staging site: <b>\"' + cloneName + '\"</b>.  <br/><br/>Database data will be overwritten for each selected table. Take care if you use a shop system like WooCommerce and check out our FAQ! <br/><br/><b>IMPORTANT:</b> Before you proceed make sure that you have a full site backup. If the pushing process is not successful contact us at <a href=\\'mailto:support@wp-staging.com\\'>support@wp-staging.com</a> or use the <b>REPORT ISSUE</b> button.</p>';\n\n      confirmModal('Confirm Push!', html, 'Push', 'wpstg-confirm-push').then(function(result) {\n        if (result.value) {\n          cache.get('#wpstg-push-changes').attr('disabled', true);\n          cache.get('.wpstg-prev-step-link').attr('disabled', true);\n          cache.get('#wpstg-scanning-files').hide();\n          cache.get('.wpstg-progress-bar-wrapper').show();\n          cache.get('#wpstg-cancel-pushing').show(); // show cancel button\n          WPStaging.switchStep(3);\n          window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n          processing();\n\n          return;\n        }\n\n        // Show db tables and folder selection\n        cache.get('.wpstg-tabs-wrapper').show();\n        cache.get('#wpstg-push-changes').show();\n      });\n    })\n    // Cancel pushing process\n        .on('click', '#wpstg-cancel-pushing', function() {\n          if (!confirm('Are you sure you want to cancel pushing process?')) {\n            return false;\n          }\n          cancelPushingProcess();\n        });\n  };\n\n  var cancelPushingProcess = function cancelPushingProcess() {\n    WPStaging.ajax({\n      action: 'wpstg_cancel_push_processing',\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    }, function(response) {\n      if (response.success) {\n        that.isCancelled = true;\n        cache.get('.wpstg-loader').hide();\n        cache.get('#wpstg-cancel-pushing').hide();\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        WPStaging.loadOverview();\n        return;\n      }\n    }, 'json', false);\n  };\n\n  /**\n     * Start ajax processing\n     * @return string\n     */\n  var processing = function() {\n    // Show loader gif\n    cache.get('.wpstg-loader').show();\n\n    // Show logging window\n    cache.get('.wpstg-log-details').show();\n\n    // Get clone id\n    const cloneID = cache.get('#wpstg-push-changes').data('clone');\n\n    const deleteUploadsBeforePush = cache.get('#wpstg-delete-upload-before-pushing')[0].checked;\n    let backupUploadsBeforePush = false;\n    if (deleteUploadsBeforePush) {\n      backupUploadsBeforePush = cache.get('#wpstg-backup-upload-before-pushing')[0].checked;\n    }\n\n    let includedTables = getSelectedTablesToPush();\n    let excludedTables = getExcludedTables();\n    let allTablesExcluded = false;\n    that.isCancelled = false;\n\n    if (includedTables.length > excludedTables.length) {\n      includedTables = '';\n    } else if (excludedTables.length > includedTables.length) {\n      excludedTables = '';\n      allTablesExcluded = includedTables === '';\n    }\n\n    WPStaging.ajax(\n        {\n          action: 'wpstg_push_processing',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          clone: cloneID,\n          includedTables: includedTables,\n          excludedTables: excludedTables,\n          allTablesExcluded: allTablesExcluded,\n          selectedTablesWithoutPrefix: getSelectedTablesWithoutPrefix(),\n          includedDirectories: getIncludedDirectories(),\n          excludedDirectories: getExcludedDirectories(),\n          extraDirectories: getIncludedExtraDirectories(),\n          createBackupBeforePushing: cache.get('#wpstg-create-backup-before-pushing')[0].checked,\n          deletePluginsAndThemes: cache.get('#wpstg-remove-uninstalled-plugins-themes')[0].checked,\n          deleteUploadsBeforePushing: deleteUploadsBeforePush,\n          backupUploadsBeforePushing: backupUploadsBeforePush,\n        },\n        function(response) {\n          if (that.isCancelled) {\n            cancelPushingProcess();\n            cache.get('.wpstg-loader').hide();\n            cache.get('#wpstg-cancel-pushing').hide();\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n          // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                        'and try again. If that does not help, ' +\n                        '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' !== typeof (response.error) && response.error) {\n            WPStaging.showError(\n                'Something went wrong! Error: ' + response.message + '.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                        'and try again. If that does not help, ' +\n                        '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n\n          // Add Log messages\n          if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n            WPStaging.getLogs(response.last_msg);\n          }\n\n          // Continue processing\n          if (false === response.status) {\n            progressBar(response);\n            setTimeout(function() {\n              cache.get('.wpstg-loader').show();\n              processing();\n            }, wpstg.delayReq);\n          } else if (true === response.status) {\n            progressBar(response);\n            processing();\n          } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            isFinished(response);\n          }\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n     * Test database connection\n     * @return object\n     */\n  const connectDatabase = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    $workFlow.on('click', '#wpstg-db-connect', function(e) {\n      e.preventDefault();\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-db-status').hide();\n      WPStaging.ajax(\n          {\n            action: 'wpstg_database_connect',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            databaseUser: cache.get('#wpstg_db_username').val(),\n            databasePassword: cache.get('#wpstg_db_password').val(),\n            databaseServer: cache.get('#wpstg_db_server').val(),\n            databaseDatabase: cache.get('#wpstg_db_database').val(),\n            databasePrefix: cache.get('#wpstg_db_prefix').val(),\n          },\n          function(response) {\n            // Undefined Error\n            if (false === response) {\n              showError(\n                  'Something went wrong! Error: No response.' +\n                            'Please try again. If that does not help, ' +\n                            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n              );\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').remove();\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-failed\"> Failed</span>');\n              return;\n            }\n\n            // Throw Error\n            if ('undefined' !== typeof (response.errors) && response.errors) {\n              WPStaging.showError(\n                  'Something went wrong! Error: ' + response.errors +\n                            ' Please try again. If that does not help, ' +\n                            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n              );\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').hide();\n              cache.get('#wpstg-db-error').remove();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-failed\"> Failed</span><br/><span id=\"wpstg-db-error\" class=\"wpstg--red\">Error: ' + response.errors + '</span>');\n              return;\n            }\n\n            if ('undefined' !== typeof (response.success) && response.success) {\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').hide();\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-db-error').hide();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-success\"> Success</span>');\n            }\n          },\n          'json',\n          false,\n      );\n    });\n\n    // Make form fields editable\n    $workFlow.on('click', '#wpstg-ext-db', function() {\n      if (this.checked) {\n        cache.get('#wpstg_db_server').removeAttr('readonly');\n        cache.get('#wpstg_db_username').removeAttr('readonly');\n        cache.get('#wpstg_db_password').removeAttr('readonly');\n        cache.get('#wpstg_db_database').removeAttr('readonly');\n        cache.get('#wpstg_db_prefix').removeAttr('readonly');\n      } else {\n        cache.get('#wpstg_db_server').attr('readonly', true).val('');\n        cache.get('#wpstg_db_username').attr('readonly', true).val('');\n        cache.get('#wpstg_db_password').attr('readonly', true).val('');\n        cache.get('#wpstg_db_database').attr('readonly', true).val('');\n        cache.get('#wpstg_db_prefix').attr('readonly', true).val('');\n      }\n    });\n  };\n\n  const editCloneData = function() {\n    // Scan db and file system\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Load scanning data\n        .on('click', '.wpstg-edit-clone-data', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          // Disable button\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          // Get clone id\n          const cloneID = $(this).data('clone');\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_edit_clone_data',\n            clone: cloneID,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          // Send ajax request\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                $workFlow.html(response);\n              },\n              'HTML',\n          );\n        })\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          WPStaging.loadOverview();\n        })\n        .on('click', '#wpstg-save-clone-data', function(e) {\n          e.preventDefault();\n\n          const idPrefix = '#wpstg-edit-clone-data-';\n          const cloneID = cache.get(idPrefix + 'clone-id').val();\n          const cloneName = cache.get(idPrefix + 'clone-name').val();\n          const directoryName = cache.get(idPrefix + 'directory-name').val();\n          const path = cache.get(idPrefix + 'path').val();\n          const url = cache.get(idPrefix + 'url').val();\n          const prefix = cache.get(idPrefix + 'prefix').val();\n          const externalDBUser = cache.get(idPrefix + 'database-user').val();\n          const externalDBPassword = cache.get(idPrefix + 'database-password').val();\n          const externalDBDatabase = cache.get(idPrefix + 'database-database').val();\n          const externalDBHost = cache.get(idPrefix + 'database-server').val();\n          const externalDBPrefix = cache.get(idPrefix + 'database-prefix').val();\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_save_clone_data',\n            clone: cloneID,\n            cloneName: cloneName,\n            directoryName: directoryName,\n            path: path,\n            url: url,\n            prefix: prefix,\n            externalDBUser: externalDBUser,\n            externalDBPassword: externalDBPassword,\n            externalDBDatabase: externalDBDatabase,\n            externalDBHost: externalDBHost,\n            externalDBPrefix: externalDBPrefix,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                if (response === 'Success') {\n                  WPStaging.loadOverview();\n                } else {\n                  alert(response);\n                }\n              },\n              'HTML',\n          );\n        });\n  };\n\n  /**\n     * All jobs are finished\n     * @param {object} response\n     * @return object\n     */\n  var isFinished = function(response) {\n    progressBar(response);\n    cache.get('.wpstg-loader').text('Finished');\n    cache.get('.wpstg-loader').addClass('wpstg-finished');\n    cache.get('.wpstg-prev-step-link').attr('disabled', false);\n    cache.get('#wpstg-cancel-pushing').hide();\n\n    WPStagingCommon.getSwalModal(true, {\n      confirmButton: 'wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width',\n      popup: 'wpstg-swal-popup wpstg-push-finished centered-modal',\n    }).fire({\n      title: 'Push Successful!',\n      icon: 'success',\n      html: 'Delete site cache if required!',\n      width: '500px',\n      focusConfirm: true,\n    });\n  };\n\n  /**\n     * Get Included (Selected) Prefixed Database Tables\n     * @return {Array}\n     */\n  var getSelectedTablesToPush = function() {\n    if (that.tableSelector === null) {\n      return '';\n    }\n\n    return that.tableSelector.getIncludedTables();\n  };\n\n  /**\n     * Get Excluded (Unchecked) Prefixed Database Tables\n     * @return {Array}\n     */\n  var getExcludedTables = function() {\n    if (that.tableSelector === null) {\n      return '';\n    }\n\n    return that.tableSelector.getExcludedTables();\n  };\n\n  /**\n     * Get Non prefixed selected Database Tables\n     * @return {Array}\n     */\n  var getSelectedTablesWithoutPrefix = function() {\n    if (that.tableSelector === null) {\n      return '';\n    }\n\n    return that.tableSelector.getSelectedTablesWithoutPrefix();\n  };\n\n\n  /**\n     * A confirmation modal\n     *\n     * @param html\n     * @param confirmText\n     * @param confirmButtonClass\n     * @return Promise\n     */\n  var confirmModal = function(title, html, confirmText, confirmButtonClass) {\n    return WPStagingCommon.getSwalModal(false, {\n      container: 'wpstg-swal-push-container',\n      confirmButton: confirmButtonClass + ' wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n    }).fire({\n      title: title,\n      icon: 'warning',\n      html: html,\n      width: '750px',\n      focusConfirm: false,\n      confirmButtonText: confirmText,\n      showCancelButton: true,\n    });\n  };\n\n  /**\n     * Get Included Directories\n     * @return {Array}\n     */\n  var getIncludedDirectories = function() {\n    const includedDirectories = [];\n\n    $('.wpstg-dir input:checked').each(function() {\n      const $this = $(this);\n      if (!$this.parent('.wpstg-dir').parents('.wpstg-dir').children('.wpstg-expand-dirs').hasClass('disabled')) {\n        includedDirectories.push($this.val());\n      }\n    });\n\n    return includedDirectories;\n  };\n\n  /**\n     * Get Excluded Directories\n     * @return {Array}\n     */\n  var getExcludedDirectories = function() {\n    const excludedDirectories = [];\n\n    $('.wpstg-dir input:not(:checked)').each(function() {\n      const $this = $(this);\n      excludedDirectories.push($this.val());\n    });\n\n    return excludedDirectories;\n  };\n\n  /**\n     * Get Included Extra Directories\n     * @return {Array}\n     */\n  var getIncludedExtraDirectories = function() {\n    var extraDirectories = [];\n\n    if (!$('#wpstg_extraDirectories').val()) {\n      return extraDirectories;\n    }\n\n    var extraDirectories = $('#wpstg_extraDirectories').val().split(/\\r?\\n/);\n\n    return extraDirectories;\n  };\n\n  var progressBar = function(response, restart) {\n    if ('undefined' === typeof (response.percentage)) {\n      return false;\n    }\n\n    if (response.job === 'JobCreateBackup') {\n      cache.get('#wpstg-progress-backup').width(response.percentage * 0.15 + '%').html(response.percentage + '%');\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 1 of 4 Creating backup...');\n    }\n\n    if (response.job === 'jobFileScanning' || response.job === 'jobCopy') {\n      cache.get('#wpstg-progress-backup').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-backup').html('1. Backup');\n      // Assumption: All previous steps are done.\n      // This avoids bugs where some steps are skipped and the progress bar is incomplete as a result\n      cache.get('#wpstg-progress-backup').width('15%');\n\n      let percentage;\n      if (response.job === 'jobFileScanning') {\n        percentage = response.percentage / 2;\n      } else {\n        percentage = 50 + response.percentage / 2;\n      }\n\n      cache.get('#wpstg-progress-files').width(percentage * 0.3 + '%').html(percentage.toFixed(0) + '%');\n      cache.get('#wpstg-processing-status').html(percentage.toFixed(0) + '%' + ' - Step 2 of 4 Copying files...');\n    }\n\n    if (response.job === 'jobCopyDatabaseTmp' || response.job === 'jobSearchReplace' || response.job === 'jobData') {\n      cache.get('#wpstg-progress-files').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-files').html('2. Files');\n      cache.get('#wpstg-progress-files').width('30%');\n\n      let percentage = 0;\n      if (response.job === 'jobCopyDatabaseTmp') {\n        percentage = response.percentage / 3;\n      } else if (response.job === 'jobSearchReplace') {\n        percentage = 100 / 3 + response.percentage / 3;\n      } else {\n        percentage = 200 / 3 + response.percentage / 3;\n      }\n\n      cache.get('#wpstg-progress-data').width(percentage * 0.4 + '%').html(percentage.toFixed(0) + '%');\n      cache.get('#wpstg-processing-status').html(percentage.toFixed(0) + '%' + ' - Step 3 of 4 Copying data...');\n    }\n    if (response.job === 'jobDatabaseRename') {\n      cache.get('#wpstg-progress-data').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-data').html('3. Data');\n      cache.get('#wpstg-progress-data').width('40%');\n\n      cache.get('#wpstg-progress-finishing').width(response.percentage * 0.15 + '%').html(response.percentage + '%');\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 4 of 4 Finishing migration...');\n    }\n    if (response.status === 'finished') {\n      cache.get('#wpstg-progress-finishing').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-finishing').html('4. Finishing migration');\n      cache.get('#wpstg-progress-finishing').width('15%');\n\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Pushing Process Finished');\n    }\n  };\n\n  that.init = function() {\n    startProcess();\n    startScanning();\n    connectDatabase();\n    editCloneData();\n    new WpstgCloneEdit();\n    new WpstgRemoteStorage();\n  };\n\n  return that;\n}(jQuery);\n\njQuery(document).ready(function($) {\n  WPStagingPro.init();\n\n  jQuery(document).on('click', '#wpstg-update-mail-settings', function(e) {\n    e.preventDefault();\n\n    $('#wpstg-update-mail-settings').attr('disabled', 'disabled');\n    const data = {\n      action: 'wpstg_update_staging_mail_settings',\n      emailsAllowed: $('#wpstg_allow_emails').is(':checked'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        WPStagingCommon.getSwalModal().fire(\n            'Unknown error',\n            'Please get in contact with us to solve it support@wp-staging.com',\n            'error',\n        );\n      },\n      success: function(response) {\n        let alertType = 'error';\n        if (response.success) {\n          alertType = 'success';\n        }\n\n        WPStagingCommon.getSwalModal().fire('', response.message, alertType).then(function() {\n          jQuery('.wpstg-mails-notice').slideUp('fast');\n        });\n        $('#wpstg-update-mail-settings').removeAttr('disabled');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          WPStagingCommon.getSwalModal().fire(\n              '404',\n              'Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com',\n              'error',\n          );\n        },\n        500: function() {\n          WPStagingCommon.getSwalModal().fire(\n              '500',\n              'Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com',\n              'error',\n          );\n        },\n      },\n    });\n  });\n});\n\n// export default {}\n"],"names":["polyfillClosest","Element","prototype","closest","matches","msMatchesSelector","webkitMatchesSelector","s","el","call","parentElement","parentNode","nodeType","element","selector","qs","document","querySelector","addEvent","parent","evt","handler","addEventListener","event","target","fadeOut","duration","style","opacity","transitionProperty","transitionDuration","setTimeout","window","display","removeProperty","getParents","result","push","DELAY_TIME_DB_CHECK","WpstgCloneEdit","workflowSelector","dbCheckTriggerClass","wpstgObject","databaseCheckAction","wpstg","workflow","dom","dbCheckTimer","abortDbCheckController","dbCheckCallStatus","notyf","Notyf","position","x","y","dismissible","types","type","background","icon","init","addEvents","forEach","abort","clearTimeout","checkDatabase","idPrefix","externalDBUser","value","externalDBPassword","externalDBDatabase","externalDBHost","externalDBPrefix","disabled","AbortController","fetch","ajaxUrl","method","signal","credentials","body","URLSearchParams","action","accessToken","nonce","databaseUser","databasePassword","databaseServer","databaseDatabase","databasePrefix","databaseEnsurePrefixTableExist","headers","then","response","ok","json","Promise","reject","data","dismissAll","error","i18n","errors","success","open","message","console","warn","WpstgPushTableSelection","inputSelector","input","cloneID","getAttribute","tablePrefix","isNetwork","areAllTablesChecked","showAllTables","selectDefaultTables","toggleTableSelection","countSelectedTables","includedTables","getIncludedTables","excludedTables","getExcludedTables","length","clone","selectedTablesWithoutPrefix","getSelectedTablesWithoutPrefix","innerHTML","content","getRegexPattern","pattern","isMultisite","options","querySelectorAll","option","name","match","selected","regexPattern","join","settings","directorySeparator","tables","tablesCount","tablesCountElement","classList","add","remove","replace","WpstgPushFileSelection","filesTabSelector","dirSelector","filesTab","toggleChildren","countSelectedFiles","checkboxes","cb","checked","filesCount","filesCountElement","themesCount","pluginsCount","head","nextSibling","onOver","onOut","pX","pY","mouseOver","focused","h","state","timer","sensitivity","interval","timeout","handleFocus","delay","e","undefined","tracker","clientX","clientY","compare","Math","abs","opt","focusOptionChanged","Object","assign","addFocus","removeFocus","dispatchOver","removeEventListener","onMouseOver","dispatchOut","onMouseOut","dispatchFocus","onFocus","dispatchBlur","onBlur","$","WPStagingCommon","continueErrorHandle","cache","elements","get","inArray","refresh","setJobId","jobId","localStorage","setItem","getJobId","getItem","listenTooltip","wpstgHoverIntent","visibility","isEmpty","obj","prop","hasOwnProperty","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","Error","Array","shift","isLoading","hide","show","slugify","url","toString","toLowerCase","normalize","showAjaxFatalError","prependMessage","appendMessage","showError","WPStaging","warnIfClosingDuringProcess","handleFetchErrors","status","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","incrementRatio","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","xhr","textStatus","errorThrown","log","errorCode","statusCode","jQuery","WpstgLoader","showModal","swalPromise","loadModal","container","getAjaxLoader","width","focusConfirm","wpstgIcon","WpstgRemoteStorage","revokeButtonSelector","revokeProviderFormSelector","revokeAction","settingsButtonSelector","settingsFormSelector","settingsAction","authenticateButtonSelector","authenticateFormSelector","authenticateAction","testConnectionButtonSelector","testConnectionFieldsSelector","testConnectionAction","revokeForm","settingsForm","authenticateForm","testConnectionFields","sendRevokeRequest","sendSettingsRequest","sendAuthenticateRequest","sendTestConnectionRequest","toggleSftpFields","toggleS3GenericFields","provider","location","reload","loader","swal","formData","FormData","append","queryString","warning","fields","ftpType","sftpElements","ftpElements","s3Provider","isCustomProvider","customFieldsContainer","getElementById","WPStagingPro","that","isCancelled","isFinished","getLogs","tableSelector","fileSelector","startScanning","$workFlow","on","preventDefault","$this","attr","addClass","switchStep","loadOverview","val","currentTarget","removeAttr","startProcess","cloneName","confirmModal","processing","confirm","cancelPushingProcess","deleteUploadsBeforePush","backupUploadsBeforePush","getSelectedTablesToPush","allTablesExcluded","includedDirectories","getIncludedDirectories","excludedDirectories","getExcludedDirectories","extraDirectories","getIncludedExtraDirectories","createBackupBeforePushing","deletePluginsAndThemes","deleteUploadsBeforePushing","backupUploadsBeforePushing","last_msg","progressBar","delayReq","job_done","connectDatabase","after","editCloneData","directoryName","path","prefix","alert","confirmText","confirmButtonClass","confirmButtonText","each","parents","children","hasClass","split","restart","percentage","job","toFixed","ready","emailsAllowed","is","alertType","slideUp"],"mappings":"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"}